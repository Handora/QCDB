<!DOCTYPE html>
<html lang="en"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <!--[if lte IE 8]><script src="../css/ie/html5shiv.js"></script><![endif]-->
    <script src="../js/jquery.min.js"></script>
    <script src="../js/jquery.dropotron.min.js"></script>
    <script src="../js/skel.min.js"></script>
    <script src="../js/skel-layers.min.js"></script>
    <script src="../js/init.js"></script>
    <link rel="stylesheet" href="../css/pygment.css" />
    <noscript>
        <link rel="stylesheet" href="../css/skel.css" />
        <link rel="stylesheet" href="../css/style.css" />
        <link rel="stylesheet" href="../css/style-noscript.css" />
    </noscript>
    <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link  href="http://fonts.googleapis.com/css?family=Anonymous+Pro:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css" >
    <!--[if lte IE 8]><link rel="stylesheet" href="/css/ie/v8.css" /><![endif]-->
    <!--[if lte IE 9]><link rel="stylesheet" href="/css/ie/v9.css" /><![endif]-->
    
    
    <meta property="og:site_name" content="CMU 15-445/645" />
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Extra Credit - CMU 15-445/645 :: Intro to Database Systems (Fall 2017)"/>
    <meta property="og:url" content="../extracredit/index.html"/>
    <meta property="article:published_time" content="2017-12-10" />
    <meta property="og:description" content="Extra Credit Assignment" />
        <meta property="og:image"
              content="http://15445.courses.cs.cmu.edu/fall2017/images/twitter-card.jpg"/>

    <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@CMUDB">
        <meta name="twitter:creator" content="@CMUDB">
    <meta name="twitter:domain" content="..">
            <meta property="twitter:image"
                  content="http://15445.courses.cs.cmu.edu/fall2017/images/twitter-card.jpg"/>
    
    
    <link href="http://db.cs.cmu.edu/favicon.png" rel="icon">

    <title>Extra Credit | CMU 15-445/645 :: Intro to Database Systems (Fall 2017) </title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width">
</head>

<body class=" loading">

    <!-- Header -->
    <header id="header" >
        <h1 class="logo">
            <a href="..">CMU 15-445/645</a>
        </h1>
        <nav id="nav">
            <ul>
                <li ><a href="index.html">Home</a></li>
                            <li><a href="../assignments.html">Assignments</a>
                            <li><a href="../schedule.html">Schedule</a>
                            <li><a href="../syllabus.html">Syllabus</a>
                <!--
                <li class="submenu">
                    <a href="../">Blog</a>
                    <ul>
                    </ul>
                </li>
                -->
                <li> <a title="Youtube" href="https://www.youtube.com/playlist?list=PLSE8ODhjZXjYutVzTeAds8xUt1rcmyT7x" target="_new"><i class="fa fa-youtube"></i> Youtube</a>
                <li> <a title="Canvas" href="https://canvas.cmu.edu/courses/1678" target="_new"><i class="fa fa-comments-o"></i> Canvas</a>
                
            </ul>
        </nav>
    </header>

<!-- Main -->
<article id="main">

    <header class="special container">
        <span class="icon fa-star"></span>
        <h2>Extra Credit</h2>
    </header>

    <section class="wrapper style4 container">
  
        <!-- Content -->
        <div class="content">
            <section>
                <p><!-- ========================================================================= -->

<!-- OVERVIEW                                                                  -->

<!-- ========================================================================= -->

<h1>Overview</h1>
<p>We are offering an extra credit assignment for those students that are interested in benchmarking a DBMS. This assignment is <b>optional</b>.</p>
<p>The <a onclick="javascript:pageTracker._trackPageview('/outgoing/db.cs.cmu.edu');" href="http://db.cs.cmu.edu">CMU Database Group</a> has created an open-source database benchmarking framework called <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com');" href="https://github.com/oltpbenchmark/oltpbench">OLTP-Bench</a>. It is designed to be a single framework that supports multiple benchmarks on multiple DBMSs. The framework is written in Java. All of the benchmarks use SQL with JDBC to load databases and execute queries.</p>
<p>Your assignment is to deploy a DBMS on Amazon EC2 and get one benchmark to work on it. You will need to configure and tune the system to the best of your abilities to maximize its performance. This means that you should not just run the system with the default configuration.</p>
<p>You are allowed to work in groups of three on a particular DBMS. You can work together to setup and deloy the system. Each team member is responsible for one benchmark.</p>
<!-- START extracredit -->

<!-- AUTO-GENERATED BY GENERATE-SCHEDULE SCRIPT -->

<!-- ANY MODIFICATIONS WILL BE OVERWRITTEN -->

<ul>
<li><b>Release Date:</b> Sep 01, 2017</li>
<li><b>Due Date:</b> Dec 14, 2017 @ 11:59pm
<!-- END extracredit --></li>
</ul>
<!-- ========================================================================= -->

<!-- INFORMATION                                                               -->

<!-- ========================================================================= -->

<h1>Information</h1>
<p>Although there are 15 different benchmarks available in the framework, your team should focus on the following ones:</p>
<ol class="default">
    <li> <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com');" href="https://github.com/oltpbenchmark/oltpbench/tree/master/src/com/oltpbenchmark/benchmarks/tpcc">TPC-C</a> (OLTP)
    <li> <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com');" href="https://github.com/oltpbenchmark/oltpbench/tree/master/src/com/oltpbenchmark/benchmarks/wikipedia">Wikipedia</a> (OLTP)
    <li> <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com');" href="https://github.com/oltpbenchmark/oltpbench/tree/master/src/com/oltpbenchmark/benchmarks/tpch">TPC-H</a> (OLAP)
</ol>

<p>We are choosing these benchmarks so that we can compare results between groups. If you are unable to get your selected benchmark running due to some unfixable reason (e.g., unsuppported SQL features), please contact Andy.</p>
<p>All of the benchmarks in the OLTP-Bench framework are able to generate their own databases <strong>except</strong> for <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com');" href="https://github.com/oltpbenchmark/oltpbench/tree/master/src/com/oltpbenchmark/benchmarks/tpch">TPC-H</a>. You will need to use the <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com');" href="https://github.com/dragansah/tpch-dbgen">dbgen</a> tool to load the database. </p>
<p><strong>Important:</strong> It is likely that some systems will not be able to support all of the features in TPC-H. If you are unable to support at least 15 out of 22 TPC-H queries, please contact Andy and you will be assigned an alternative benchmark.</p>
<h2>Framework Configuration</h2>
<p>In order for OLTP-Bench to use a new DBMS, you have to add it to <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com');" href="https://github.com/oltpbenchmark/oltpbench/blob/master/src/com/oltpbenchmark/types/DatabaseType.java#L28">DatabaseType</a> enum.</p>
<p>You have the define the following settings for each new entry:</p>
<ul class="default">
    <li> <code>escapeNames</code>: Whether the benchmark loader should escape table and column names for the SQL statement that inserts tuples.
    <li> <code>includeColNames</code>: Whether the benchmark loader should include the column names in the SQL statement that inserts tuples.
</ul>

<p>Most systems will likely just need to use <code>escapeNames=true</code> and <code>includeColNames=false</code>. Contact Andy if you are stuck on this.</p>
<h2>SQL Dialects</h2>
<p>Each benchmark implementation includes a <code>dialects</code> directory that contains XML files that allow you to override its transactions' default SQL statements. All of the benchmark are designed run on MySQL by default. Each transaction contains pre-defined <code>SQLStmt</code> objects. The name of the <code>SQLStmt</code> variable is the identifable handle that you can override in the dialects file.</p>
<p>For example, the TPC-C Delivery transaction contains the <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com');" href="https://github.com/oltpbenchmark/oltpbench/blob/master/src/com/oltpbenchmark/benchmarks/tpcc/procedures/Delivery.java#L38">delivGetOrderIdSQL</a> query. The <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com');" href="https://github.com/oltpbenchmark/oltpbench/blob/master/src/com/oltpbenchmark/benchmarks/tpcc/dialects/oracle-dialects.xml#L5">oracle-dialects.xml</a> file contains a version of the same query that is designed to work on Oracle. The framework will automatically substitute the default SQL statement with the DBMS-specific one at runtime.</p>
<h2>Benchmark Settings</h2>
<p>You should use the following settings in the config file for each benchmark. Do not change the <code>weights</code> settings.</p>
<h3>TPC-C</h3>
<p>Sample Config File: <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com');" href="https://github.com/oltpbenchmark/oltpbench/blob/master/config/sample_tpcc_config.xml">config/sample_tpcc_config.xml</a></p>
<ul>
<li><code>isolation</code>: TRANSACTION_READ_COMMITTED</li>
<li><code>terminals</code>: 64</li>
<li><code>scalefactor</code>: 16</li>
<li><code>rate</code>: unlimited</li>
<li><code>time</code>: 300</li>
</ul>
<h3>Wikipedia</h3>
<p>Sample Config File: <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com');" href="https://github.com/oltpbenchmark/oltpbench/blob/master/config/sample_wikipedia_config.xml">config/sample_wikipedia_config.xml</a></p>
<ul>
<li><code>isolation</code>: TRANSACTION_READ_COMMITTED</li>
<li><code>terminals</code>: 64</li>
<li><code>scalefactor</code>: 100</li>
<li><code>rate</code>: unlimited</li>
<li><code>time</code>: 300</li>
</ul>
<h3>TPC-H</h3>
<p>Sample Config File: <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com');" href="https://github.com/oltpbenchmark/oltpbench/blob/master/config/sample_tpch_config.xml">config/sample_tpch_config.xml</a></p>
<ul>
<li><code>isolation</code>: TRANSACTION_READ_COMMITTED</li>
<li><code>terminals</code>: 1</li>
<li><code>scalefactor</code>: 20</li>
<li><code>rate</code>: unlimited</li>
<li><code>time</code>: Do not set!</li>
</ul>
<!-- ========================================================================= -->

<!-- Instructions                                                              -->

<!-- ========================================================================= -->

<h1 id="instructions">Instructions</h1>

<ol class="default">
    <li> Download the <a onclick="javascript:pageTracker._trackPageview('/downloads/../files/extracredit-submission.txt');" href="../files/extracredit-submission.txt">extra credit submission file</a>. You will need to document all of the steps that you took to get the benchmark running on your DBMS in this file and submit it at the end to get credit.

    <li> <s>Choose a DBMS that you will benchmark. Make sure that the system supports SQL and JDBC. Add your AndrewId to the <a onclick="javascript:pageTracker._trackPageview('/outgoing/cmudb.io');" href="http://cmudb.io/f17-extra">sign-up spreadsheet</a>. Remember that there can only be three students per DBMS. Andy has to approve your DBMS first before you are allowed to proceed.</s>

    <li> Setup OLTP-Bench and your target DBMS on local development machine. This will allow you work on getting the OLTP-Bench framework to run your selected benchmark without costing you AWS credits.

    <li> Deploy your DBMS on EC2. You can use a cheaper instance type (e.g., <code>t2.2xlarge</code>) to get started with the EC2 environment. You will need to document all of the steps that you did to install and configure the DBMS to get it to work. You will then deploy OLTP-Bench on another instance:
    <ol class="default">
        <li> If you are executing an OLTP benchmark, then you will want to use an instance type with more compute cores (<code>c4.4xlarge</code>).
        <li> If you are executing an OLAP benchmark, then you can use a less powerful instance type (<code>t2.2xlarge</code>).
    </ol>
    For the final benchmarking, you must switch your DBMs instance type to use the <code>c4.4xlarge</code> instance type.

    <li> Run each benchmark three times using the following command:
    <pre>$ ant build execute -Dbenchmark=$(BENCHMARK) \
        -Dconfig=config/$(CONFIG).xml \
        -Dcreate=false \
        -Dload=false \
        -Dexecute=false \
        -Dextra="-s 10"</pre>
    Note that the "-s 10" command option tells the framework to summarize the performance of the DBMS every 10 seconds.


    <BR/>The framework will print the DBMS's throughput to the terminal. It should look something like this:
    <pre>Rate limited reqs/s: Results(nanoSeconds=10099645360, measuredRequests=101) = 10.00035 requests/sec</pre>

    The <b>requests/sec</b> is the number that you want to report on the spreadsheet.
    Each benchmark trial will also generate two files:
    <ol class="default">
        <li> <tt class="filepath">results/oltpbench.$(NUM).csv</tt> (Raw Execution Stats)
        <li> <tt class="filepath">results/oltpbench.$(NUM).res</tt> (Aggregated Throughput)
    </ol>
    Save these files and include them in your final submission.


</ol>

<!-- ========================================================================= -->

<!-- HINTS                                                                     -->

<!-- ========================================================================= -->

<h1>Hints</h1>
<p>You can reach out to the DBMS vendors to ask for help in setting up your DBMS. Look for tuning guides.</p>
<p>There are some rare cases where the OLTP-Bench framework gets stuck at the end of the benchmark when it is trying to collect the results. You can just kill the benchmark (<tt>CTRL+C</tt>). If this happens repeatedly for you, please email Andy.</p>
<p>If your system supports distributed deployments, you only need to benchmark it with a single node configuration.</p>
<!-- ========================================================================= -->

<!-- LATE POLICY                                                               -->

<!-- ========================================================================= -->

<h1>Late Policy</h1>
<p>No late submissions are allowed.</p>
<!-- ========================================================================= -->

<!-- SUBMISSION                                                                -->

<!-- ========================================================================= -->

<h1>Submission</h1>
<p>Your team should submit the following items:</p>
<ol class="default">
    <li> Update the class result spreadsheet with the results (see Canvas announcement for link).

    <li> A <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com');" href="https://github.com/oltpbenchmark/oltpbench/pulls">pull request</a> with your dialects file, changes to `DatabaseType`, and your default configuration file. Be sure to not include identifable information in your config file (e.g., IP address, username, password).

    <li> Send Andy an email with a tarball that contains the following files from your experiments:
    <ul class="default">
        <li> <a onclick="javascript:pageTracker._trackPageview('/downloads/../files/extracredit-submission.txt');" href="../files/extracredit-submission.txt">Submission File</a>
        <li> <b>TPC-C Results:</b>
        <ul class="default">
            <li> <tt class="filepath">tpcc/oltpbench.$(TRIAL1).csv</tt>
            <li> <tt class="filepath">tpcc/oltpbench.$(TRIAL1).res</tt>
            <li> <tt class="filepath">tpcc/oltpbench.$(TRIAL2).csv</tt>
            <li> <tt class="filepath">tpcc/oltpbench.$(TRIAL2).res</tt>
            <li> <tt class="filepath">tpcc/oltpbench.$(TRIAL3).csv</tt>
            <li> <tt class="filepath">tpcc/oltpbench.$(TRIAL3).res</tt>
        </ul>
        <li> <b>Wikipedia Results:</b>
        <ul class="default">
            <li> <tt class="filepath">wikipedia/oltpbench.$(TRIAL1).csv</tt>
            <li> <tt class="filepath">wikipedia/oltpbench.$(TRIAL1).res</tt>
            <li> <tt class="filepath">wikipedia/oltpbench.$(TRIAL2).csv</tt>
            <li> <tt class="filepath">wikipedia/oltpbench.$(TRIAL2).res</tt>
            <li> <tt class="filepath">wikipedia/oltpbench.$(TRIAL3).csv</tt>
            <li> <tt class="filepath">wikipedia/oltpbench.$(TRIAL3).res</tt>
        </ul>
        <li> <b>TPC-H Results:</b>
        <ul class="default">
            <li> <tt class="filepath">tpch/oltpbench.$(TRIAL1).csv</tt>
            <li> <tt class="filepath">tpch/oltpbench.$(TRIAL1).res</tt>
            <li> <tt class="filepath">tpch/oltpbench.$(TRIAL2).csv</tt>
            <li> <tt class="filepath">tpch/oltpbench.$(TRIAL2).res</tt>
            <li> <tt class="filepath">tpch/oltpbench.$(TRIAL3).csv</tt>
            <li> <tt class="filepath">tpch/oltpbench.$(TRIAL3).res</tt>
        </ul>
    </ul>

    You can use the following command to create your tarball:
    <pre>$ tar zfvc extracredit-$(SYSTEM).tar.gz extracredit-submission.txt tpcc/* wikipedia/* tpch/*</pre>


</ol></p>
                <div class="published">
                    <time datetime="2017-12-10 13:59:44.131397-05:00"> <B>Last Updated:</B> Dec 10, 2017</time>
                </div>
            </section>
        </div>
    </section>
</article>

<!-- Footer -->
<footer id="footer">

    <ul class="icons">
    </ul>
    
    <span class="copyright">
    <a onclick="javascript:pageTracker._trackPageview('/outgoing/db.cs.cmu.edu');" href="http://db.cs.cmu.edu" title="Carnegie Mellon Database Group" class="image-link"><img src="../images/cmu-db-group.png"></a>
    </span>

</footer>    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-4067813-24']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>